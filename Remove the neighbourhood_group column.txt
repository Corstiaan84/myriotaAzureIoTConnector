Remove the neighbourhood_group column

Might as well remove license column as only 1 is not null

SELECT TOP(1000) * FROM listings WHERE license Is NOT NULL

SELECT COUNT(*) FROM listings -- 87947

SELECT TOP 1000 * FROM listings ORDER BY ID ASC

SELECT TOP 1000 * FROM listings ORDER BY ID DESC

SELECT host_id, COUNT(*) as ListingCount FROM listings GROUP BY host_id ORDER BY  ListingCount

SELECT * FROM listings WHERE host_id = 129230780

SELECT * FROM listings WHERE neighbourhood_group IS NOT NULL -- 0

SELECT * FROM listings WHERE license IS NOT NULL -- 1

SELECT DISTINCT(neighbourhood) FROM listings ORDER BY neighbourhood

SELECT * FROM listings WHERE neighbourhood LIKE '% and %' -- 10177

SELECT * FROM listings WHERE neighbourhood = 'Barking and Dagenham' -- 564

SELECT * FROM listings WHERE neighbourhood = 'Hammersmith and Fulham' -- 3795

SELECT * FROM listings WHERE neighbourhood = 'Kensington and Chelsea' -- 5818

SELECT * FROM listings WHERE host_id IS NULL - 0

SELECT DISTINCT(host_id) FROM listings ORDER BY host_id --53395

SELECT * FROM listings WHERE Name LIKE '%★%' escape '★'

SELECT * FROM listings WHERE Name LIKE '%' +  STRING_ESCAPE('★','json') + '%'


SELECT Name FROM listings WHERE Name LIKE '%' + N'★' + '%'

SELECT * FROM listings WHERE number_of_reviews = 0 --22158

SELECT * FROM listings WHERE number_of_reviews > 0 -- 65789





ALTER PROCEDURE [dbo].[ListingSearchV3]
@SearchText as NVARCHAR(50),
@PageSize as INT,
@PageNumber as INT
AS
BEGIN

SELECT Id,[Name],neighbourhood 
FROM listings 
WHERE [Name] LIKE '%' + @SearchText + '%'
ORDER By [Name] OFFSET @PageSize * (@PageNumber-1) ROWS FETCH NEXT @PageSize ROWS ONLY

END


GRANT EXECUTE ON ListingSearchV3 TO WebMinimalAPI


EXEC sp_configure 'CONTAINED DATABASE AUTHENTICATION'

EXEC sp_configure 'CONTAINED DATABASE AUTHENTICATION', 1

RECONFIGURE


CREATE USER WebMinimalAPI WITH PASSWORD = '0NOLp#b&q50YS9A5';


"Data Source=.; Initial Catalog=AirbnB; User id=WebMinimalAPI; Password=0NOLp#b&q50YS9A5;";

CREATE PROCEDURE ListingSearchV1

AS
BEGIN

SELECT TOP 100 * FROM listings ORDER By [Name]
END
GO

GRANT EXECUTE ON ListingSearchV1 TO WebMinimalAPI

CREATE USER WebMinimalAPI WITH PASSWORD = '0NOLp#b&q50YS9A5';